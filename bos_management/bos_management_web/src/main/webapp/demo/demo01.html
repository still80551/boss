<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>

<link rel="stylesheet" type="text/css" href="../js/easyui/themes/default/easyui.css">
	<link rel="stylesheet" type="text/css" href="../js/easyui/themes/icon.css">
	<link rel="stylesheet" href="../js/ztree/zTreeStyle.css" type="text/css">
	<script type="text/javascript" src="../js/jquery-1.8.3.js"></script>
	<script type="text/javascript" src="../js/easyui/jquery.easyui.min.js"></script>
	<script type="text/javascript" src="../js/ztree/jquery.ztree.all-3.5.js "></script>
	
<script type="text/javascript">

	function addTabs(){
		
		var flag = $('#tt').tabs('exists','新建一个选项')
		if(flag){
			$('#tt').tabs('select','新建一个选项')
		}else{
			$('#tt').tabs('add',{    
			    title:'新建一个选项',   
			});
		}
	}
	
</script>

<script type="text/javascript">

	
		$(function(){
		
			var setting = {
					data: {
						simpleData: {
							enable: true,
							idKey: "id",
							pIdKey: "pId",
							rootPId: 0
						}
					},
					
					callback: {
						onClick: function(event, treeId, treeNode){
							console.log(treeNode)
							var pId = treeNode.pId
							if(pId != 0){
								var flag = $('#tt').tabs('exists',treeNode.name)
								if(flag){
									$('#tt').tabs('select',treeNode.name)
								}else{
									$('#tt').tabs('add',{    
									    title:treeNode.name,   
									    content:'<iframe src="../'+treeNode.page+'" width="100%" height="100%"> '
									});
								}
							}
							
						}
					}
				};
			
			$.get("../data/menu.json",function(data){
				
				$.fn.zTree.init($("#treeDemo"), setting, data);
			})
		})
		
		
		
	
	
	
	
	
</script>
</head>
<body class="easyui-layout">
	
		<div data-options="region:'north'" style="height:50px"></div>
		
		<div data-options="region:'west',split:true" title="West" style="width:250px;">
			<div class="easyui-accordion" data-options="fit:true">
				<div title="面板1" >
					<a id="btn" onclick="addTabs()" href="#" class="easyui-linkbutton" data-options="iconCls:'icon-search'">添加新选项</a> 
				</div>
				<div title="面板2"  data-options="selected:true">
					<ul class="ztree" id="treeDemo"></ul>
				</div>
				<div title="面板3" >面板3</div>
			</div>
		
		</div>
		
		
		<div  data-options="region:'center',title:'Main Title',iconCls:'icon-ok'">
				<div id="tt" class="easyui-tabs" data-options="fit:true">
					<div title="选项一" style="padding:10px"></div>
					<div title="选项二" style="padding:10px"></div>
					<div title="选项三" style="padding:10px"></div>
		</div>
</body>
</html>